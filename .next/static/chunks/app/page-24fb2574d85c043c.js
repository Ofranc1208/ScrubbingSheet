(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{67:function(){},2061:function(){},4663:function(e,t,a){Promise.resolve().then(a.bind(a,9393))},9393:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var r=a(7437),n=a(2265);function s(e){let{uploadedFile:t,completedRecords:a,onFileUpload:s,onExport:l,onCompleteAndNext:o,hasCurrentRecord:d,onHardReset:i,hasStoredData:c}=e,[u,m]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{m(!0)},[]),(0,r.jsxs)("div",{className:"w-80 bg-white shadow-lg p-6 flex flex-col h-screen",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Data Scrubber"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"High-volume data cleaning"})]}),u&&c&&(0,r.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1 animate-pulse"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Auto-saved"})]})]})}),(0,r.jsxs)("div",{className:"space-y-3 flex-1",children:[(0,r.jsx)("h3",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wider mb-2",children:"Actions"}),d&&(0,r.jsxs)("button",{onClick:o,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-bold py-3 px-4 rounded-lg transition-all shadow-md flex items-center justify-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Complete & Next"]}),a.length>0&&(0,r.jsxs)("button",{onClick:l,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center text-sm",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export (",a.length,")"]}),(0,r.jsxs)("button",{onClick:i,className:"w-full bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center text-sm",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Hard Reset"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:s,className:"hidden",id:"file-upload-sidebar"}),(0,r.jsx)("label",{htmlFor:"file-upload-sidebar",className:"cursor-pointer",children:(0,r.jsxs)("div",{className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center text-sm",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),"Upload File"]})})]}),(0,r.jsxs)("div",{className:"mt-4 p-3 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[(0,r.jsx)("h4",{className:"text-xs font-semibold text-blue-900 mb-2",children:"\uD83D\uDCCA Progress"}),(0,r.jsxs)("div",{className:"space-y-1 text-xs text-blue-700",children:[(0,r.jsxs)("p",{children:["Completed: ",(0,r.jsx)("span",{className:"font-bold text-lg",children:a.length})]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Target: 500-600 records"}),a.length>0&&(0,r.jsx)("div",{className:"mt-2 bg-white rounded-full h-2 overflow-hidden",children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 h-full transition-all",style:{width:"".concat(Math.min(a.length/500*100,100),"%")}})})]})]}),(0,r.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-900 mb-2",children:"\uD83D\uDE80 Workflow"}),(0,r.jsxs)("ol",{className:"text-xs text-gray-600 space-y-1 list-decimal list-inside",children:[(0,r.jsx)("li",{children:"Paste raw data below"}),(0,r.jsx)("li",{children:'Click "Parse Data"'}),(0,r.jsx)("li",{children:'Click "Process & Organize"'}),(0,r.jsx)("li",{children:"Review/edit fields above"}),(0,r.jsx)("li",{children:'Click "Complete & Next"'}),(0,r.jsx)("li",{children:"Repeat for all records"}),(0,r.jsx)("li",{children:"Export when done"})]}),(0,r.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"\uD83D\uDCBE Auto-saved to browser"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:'Use "Hard Reset" to clear all data'})]})]})]})]})}function l(e){if(!e||""===e.trim()||"unknown"===e.toLowerCase())return 50;try{let t=new Date(e),a=new Date,r=a.getFullYear()-t.getFullYear(),n=a.getMonth()-t.getMonth();return(n<0||0===n&&a.getDate()<t.getDate())&&r--,r}catch(e){return 50}}function o(e){let t=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),r=e.getFullYear();return"".concat(t,"/").concat(a,"/").concat(r)}function d(e){let{className:t}=e;return(0,r.jsxs)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}function i(e){let{className:t}=e;return(0,r.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})})}function c(e){let{currentRecord:t,onFieldChange:a}=e,[s,o]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(null==t?void 0:t.dob){let e=l(t.dob);e>0&&e!==Number(null==t?void 0:t.age)&&a("age",String(e))}},[null==t?void 0:t.dob]),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xs font-semibold text-gray-700 mb-2 pb-1 border-b",children:"Client Information"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{key:"crmId",label:"CRM ID",placeholder:"Enter CRM ID",type:"text"},{key:"firstName",label:"First Name",placeholder:"Enter first name",type:"text"},{key:"lastName",label:"Last Name",placeholder:"Enter last name",type:"text"},{key:"ssn",label:"SSN",placeholder:"###-##-####",type:"text"},{key:"dob",label:"Date of Birth",placeholder:"MM/DD/YYYY",type:"text"},{key:"age",label:"Age",placeholder:"Auto-calculated",type:"text"},{key:"gender",label:"Gender",placeholder:"Male/Female",type:"text"},{key:"phone1",label:"Phone 1 (Main)",placeholder:"Enter main phone",type:"text"},{key:"phone2",label:"Phone 2",placeholder:"Enter secondary phone",type:"text"},{key:"phone3",label:"Phone 3",placeholder:"Enter third phone",type:"text"},{key:"email",label:"Email",placeholder:"Enter email address",type:"text"}].map(e=>(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-[10px] font-medium text-gray-700 mb-0.5",children:e.label}),"ssn"===e.key?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:s?"text":"password",value:(null==t?void 0:t[e.key])||"",onChange:t=>a(e.key,t.target.value),placeholder:e.placeholder,className:"w-full px-2 py-1.5 pr-8 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent"}),(0,r.jsx)("button",{type:"button",onClick:()=>o(!s),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?(0,r.jsx)(i,{className:"w-3 h-3"}):(0,r.jsx)(d,{className:"w-3 h-3"})})]}):(0,r.jsx)("input",{type:e.type,value:(null==t?void 0:t[e.key])||"",onChange:t=>a(e.key,t.target.value),placeholder:e.placeholder,readOnly:"age"===e.key,className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent ".concat("age"===e.key?"bg-gray-50 cursor-not-allowed":"")})]},e.key))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xs font-semibold text-gray-700 mb-2 pb-1 border-b",children:"Address Information"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{key:"fullAddress",label:"Full Address",placeholder:"Enter complete address",span:3},{key:"streetAddress1",label:"Street Address 1",placeholder:"Enter street address",span:1},{key:"streetAddress2",label:"Street Address 2",placeholder:"Apt, Suite, etc.",span:1},{key:"city",label:"City",placeholder:"Enter city",span:1},{key:"state",label:"State",placeholder:"Enter state",span:1},{key:"zipCode",label:"ZIP Code",placeholder:"Enter ZIP",span:1}].map(e=>(0,r.jsxs)("div",{className:3===e.span?"col-span-3":"",children:[(0,r.jsx)("label",{className:"block text-[10px] font-medium text-gray-700 mb-0.5",children:e.label}),(0,r.jsx)("input",{type:"text",value:(null==t?void 0:t[e.key])||"",onChange:t=>a(e.key,t.target.value),placeholder:e.placeholder,className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent"})]},e.key))})]})]})}function u(e){let{currentRecord:t,onFieldChange:a,onCalculatorToggle:n}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xs font-semibold text-gray-700 mb-2 pb-1 border-b",children:"Pricing Information"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{key:"insuranceCompany",label:"Insurance Company",placeholder:"Enter insurance company",type:"text",readOnly:!1},{key:"typeOfPayment",label:"Payment Type",placeholder:"LCP/Guaranteed",type:"text",readOnly:!1},{key:"paymentFrequency",label:"Frequency",placeholder:"Monthly/Annual",type:"text",readOnly:!1},{key:"paymentStartDate",label:"Start Date",placeholder:"Auto-calculated",type:"text",readOnly:!0},{key:"paymentEndDate",label:"End Date",placeholder:"Auto-calculated",type:"text",readOnly:!0},{key:"paymentAmount",label:"Amount",placeholder:"Enter amount",type:"number",readOnly:!1},{key:"annualIncrease",label:"Annual Increase %",placeholder:"0",type:"number",readOnly:!1}].map(e=>(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-[10px] font-medium text-gray-700 mb-0.5",children:e.label}),"annualIncrease"===e.key?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:e.type,value:(null==t?void 0:t[e.key])||"",onChange:t=>a(e.key,t.target.value),placeholder:e.placeholder,className:"w-full px-2 py-1.5 pr-8 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent"}),(0,r.jsx)("button",{type:"button",onClick:n,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-blue-500 hover:text-blue-700 font-bold",title:"Calculate percentage",children:(0,r.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]}):(0,r.jsx)("input",{type:e.type,value:(null==t?void 0:t[e.key])||"",onChange:t=>a(e.key,t.target.value),placeholder:e.placeholder,readOnly:e.readOnly,className:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent ".concat(e.readOnly?"bg-gray-50 cursor-not-allowed":"")})]},e.key))})]})}class m{static calculateAnnualIncreasePercentage(e,t){let a=parseFloat(e),r=parseFloat(t);return isNaN(a)||isNaN(r)||a<=0?0:Math.round((r-a)/a*1e4)/100}static validateCalculationInputs(e,t){let a=[];(!e||isNaN(parseFloat(e)))&&a.push("Old payment amount is required and must be a valid number"),(!t||isNaN(parseFloat(t)))&&a.push("New payment amount is required and must be a valid number");let r=parseFloat(e);return parseFloat(t),r<=0&&a.push("Old payment amount must be greater than zero"),{isValid:0===a.length,errors:a}}}function p(e){let{showCalculator:t,oldPayment:a,newPayment:n,onOldPaymentChange:s,onNewPaymentChange:l,onCalculate:o,onClose:d}=e;return t?(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:[(0,r.jsx)("h4",{className:"text-[10px] font-semibold text-blue-900 mb-2",children:"Calculate Annual Increase %"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-[9px] font-medium text-gray-700 mb-0.5",children:"Old Payment Amount"}),(0,r.jsx)("input",{type:"number",value:a,onChange:e=>s(e.target.value),placeholder:"e.g., 11610.60",className:"w-full px-2 py-1 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-[9px] font-medium text-gray-700 mb-0.5",children:"New Payment Amount"}),(0,r.jsx)("input",{type:"number",value:n,onChange:e=>l(e.target.value),placeholder:"e.g., 11958.92",className:"w-full px-2 py-1 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500"})]})]}),(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("button",{onClick:()=>{let e=m.validateCalculationInputs(a,n);if(!e.isValid){alert(e.errors.join("\n"));return}o(m.calculateAnnualIncreasePercentage(a,n))},className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-1 px-2 rounded text-[10px]",children:"Calculate"}),(0,r.jsx)("button",{onClick:d,className:"bg-gray-400 hover:bg-gray-500 text-white font-medium py-1 px-2 rounded text-[10px]",children:"Cancel"})]})]}):null}function h(e){let{currentRecord:t,onFieldChange:a}=e,s=function(){let[e,t]=(0,n.useState)(!1),[a,r]=(0,n.useState)(""),[s,l]=(0,n.useState)(""),o=()=>{r(""),l("")};return{showCalculator:e,oldPayment:a,newPayment:s,setOldPayment:r,setNewPayment:l,resetCalculator:o,toggleCalculator:()=>{t(!e),e&&o()}}}();return(0,n.useEffect)(()=>{(null==t?void 0:t.paymentStartDate)||a("paymentStartDate",function(){let e=new Date(new Date);return e.setMonth(e.getMonth()+6),o(e)}())},[]),(0,n.useEffect)(()=>{let e=Number(null==t?void 0:t.age),r=null==t?void 0:t.paymentStartDate,n=null==t?void 0:t.paymentEndDate;if(e>0&&r&&!n){let t=function(e,t){if(!t||""===t.trim()||e<=0)return"";try{let a=e<=0||e>=75?0:Math.min(30,75-e);if(0===a)return"";let r=new Date(t),n=new Date(r);return n.setFullYear(n.getFullYear()+a),o(n)}catch(e){return""}}(e,r);t&&a("paymentEndDate",t)}},[null==t?void 0:t.age,null==t?void 0:t.paymentStartDate]),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(u,{currentRecord:t,onFieldChange:a,onCalculatorToggle:s.toggleCalculator}),(0,r.jsx)(p,{showCalculator:s.showCalculator,oldPayment:s.oldPayment,newPayment:s.newPayment,onOldPaymentChange:s.setOldPayment,onNewPaymentChange:s.setNewPayment,onCalculate:e=>{a("annualIncrease",String(e)),s.resetCalculator()},onClose:()=>s.toggleCalculator()})]})}function x(e){let{currentRecord:t,onFieldChange:a}=e,[s,l]=(0,n.useState)("contact");return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 h-full flex flex-col",children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,r.jsx)("h2",{className:"text-base font-bold text-gray-900",children:"Organized Data"})}),(0,r.jsx)("div",{className:"flex space-x-1 mb-3 border-b border-gray-200",children:[{id:"contact",label:"Contact Info",icon:"\uD83D\uDC65"},{id:"pricing",label:"Pricing Info",icon:"\uD83D\uDCB0"}].map(e=>(0,r.jsxs)("button",{onClick:()=>l(e.id),className:"flex items-center px-3 py-1.5 text-xs font-medium border-b-2 transition-colors ".concat(s===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,r.jsx)("span",{className:"mr-1.5 text-sm",children:e.icon}),e.label]},e.id))}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto",children:["contact"===s&&(0,r.jsx)(c,{currentRecord:t,onFieldChange:a}),"pricing"===s&&(0,r.jsx)(h,{currentRecord:t,onFieldChange:a})]})]})}function g(e){let{rawData:t,parsedData:a,onRawDataChange:n,onParseData:s,onProcessData:l,onResetCurrentData:o}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-2 h-full flex flex-col",children:[(0,r.jsx)("h2",{className:"text-sm font-bold text-gray-900 mb-1",children:"Cut & Paste Data"}),(0,r.jsxs)("div",{className:"flex-1 flex gap-2 min-h-0",children:[(0,r.jsxs)("div",{className:"flex-1 min-h-0",children:[(0,r.jsx)("label",{className:"block text-[10px] font-medium text-gray-700 mb-0.5",children:"Paste Your Raw Data Here:"}),(0,r.jsx)("textarea",{value:t,onChange:e=>n(e.target.value),placeholder:"Paste your tab-delimited or comma-separated data here...",className:"w-full h-full p-1.5 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent resize-none"})]}),a.rows&&a.rows.length>0&&(0,r.jsxs)("div",{className:"flex-1 min-h-0",children:[(0,r.jsx)("h3",{className:"text-[10px] font-semibold text-gray-700 mb-0.5",children:"Preview"}),(0,r.jsx)("div",{className:"bg-gray-50 p-1.5 rounded overflow-auto h-full border",children:(0,r.jsxs)("table",{className:"min-w-full text-[10px]",children:[(0,r.jsx)("thead",{className:"sticky top-0 bg-gray-50",children:(0,r.jsx)("tr",{children:a.headers&&a.headers.map((e,t)=>(0,r.jsx)("th",{className:"px-1 py-0.5 text-left font-medium",children:e},t))})}),(0,r.jsx)("tbody",{children:a.rows.map((e,t)=>(0,r.jsx)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:e.map((e,t)=>(0,r.jsx)("td",{className:"px-1 py-0.5 border-t",children:e},t))},t))})]})})]})]}),(0,r.jsxs)("div",{className:"flex gap-1 mt-1",children:[(0,r.jsx)("button",{onClick:s,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-1 px-2 rounded transition-colors text-xs",children:"Parse Data"}),a.rows&&a.rows.length>0&&(0,r.jsx)("button",{onClick:l,className:"bg-green-600 hover:bg-green-700 text-white font-medium py-1 px-2 rounded transition-colors text-xs",children:"Process & Organize"}),(t.trim()||a.rows&&a.rows.length>0)&&(0,r.jsx)("button",{onClick:o,className:"bg-gray-500 hover:bg-gray-600 text-white font-medium py-1 px-2 rounded transition-colors text-xs",title:"Reset current data entry",children:"↺ Reset"})]})]})}let y="dataScrubber_data";function f(){try{localStorage.removeItem(y),console.log("\uD83D\uDDD1️ localStorage cleared:",new Date().toLocaleTimeString())}catch(e){console.error("❌ Failed to clear localStorage:",e)}}function b(e){if(!e||0===e.trim().length)return null;let t={...function(e){let t={},a=e.match(/\(ID=(\d+)\)/)||e.match(/ID[:\s=]+(\d+)/);a&&(t.crmId=a[1]);let r=e.indexOf("Name:");if(-1!==r){let a=e.substring(r+5).split(/\s+/).filter(e=>/^[A-Za-z]+$/.test(e));a.length>=2&&(t.firstName=a[0],t.lastName=a[1])}if(!t.lastName&&t.firstName){let a=e.match(/Name:\s*([A-Za-z]+)\s+([A-Za-z]+)/);a&&(t.firstName=a[1],t.lastName=a[2])}let n=e.match(/Gen(?:der)?:\s*\n?\s*([A-Za-z]+)/i);if(n){let e=n[1].toLowerCase();e.startsWith("m")?t.gender="Male":e.startsWith("f")?t.gender="Female":t.gender="Unknown"}else t.gender="Unknown";let s=e.match(/SSN:?\s*\n?\s*(\d{3}[-\s]?\d{2}[-\s]?\d{4})/);if(s){let e=s[1].replace(/\s/g,"").replace(/(\d{3})(\d{2})(\d{4})/,"$1-$2-$3");t.ssn=e}else t.ssn="Unknown";let l=e.match(/DOB:?\s*\n?\s*(\d{1,2}\/\d{1,2}\/\d{4})/);return l?t.dob=l[1]:t.dob="Unknown",t}(e),...function(e){let t={},a=[];for(let t of e.split("Phone #")){let e;if(!t.trim())continue;let r=t.match(/^\s*\n?\s*(\d{3}[-.\s]?\d{3}[-.\s]?\d{4})/);if(!r)continue;let n=r[1],s=t.includes("Active")&&!t.includes("Inactive");if(!s)continue;let l=t.match(/Modified:\s*(\d{1,2}\/\d{1,2}\/\d{4})/);if(l){let[t,a,r]=l[1].split("/").map(Number);e=new Date(r,t-1,a)}else e=new Date(1900,0,1);a.push({number:n,modifiedDate:e,isActive:s})}let r=a.sort((e,t)=>t.modifiedDate.getTime()-e.modifiedDate.getTime());if(r.length>0&&(t.phone1=r[0].number),r.length>1&&(t.phone2=r[1].number),r.length>2&&(t.phone3=r[2].number),!t.phone1){let a=e.match(/Phone:?\s*\n?\s*(\d{3}[-.\s]?\d{3}[-.\s]?\d{4})/);a&&(t.phone1=a[1])}let n=e.match(/Email:?\s*\n?\s*([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/);return n&&(t.email=n[1]),t}(e),...function(e){let t={},a=e.match(/(?:Mailing Address|Home Address)[^\n]*\n([^\n]+)\n([^\n]+)\n\n([A-Za-z\s]+)\n[^\n]*\n[^\n]*\n(\d{5})/);if(a){let e=a[1].trim();/Goto Record|Next Record|Last Record|Remove Record|Save Record/i.test(e)||(t.streetAddress1=e,t.city=a[2].trim(),t.state=a[3].trim(),t.zipCode=a[4].trim())}if(!t.streetAddress1){let a=e.split("\n");for(let e=0;e<a.length;e++){let r=a[e].trim();if(!t.streetAddress1&&/\d+\s+[A-Za-z\s]+(Road|Street|Avenue|Ave|Rd|St|Drive|Dr|Lane|Ln|Court|Ct|County|Way|Boulevard|Blvd)/i.test(r)&&(t.streetAddress1=r),!t.zipCode&&/^\d{5}(-\d{4})?$/.test(r)){t.zipCode=r;for(let r=e-1;r>=Math.max(0,e-5);r--){let e=a[r].trim();if(/^(Alabama|Alaska|Arizona|Arkansas|California|Colorado|Connecticut|Delaware|Florida|Georgia|Hawaii|Idaho|Illinois|Indiana|Iowa|Kansas|Kentucky|Louisiana|Maine|Maryland|Massachusetts|Michigan|Minnesota|Mississippi|Missouri|Montana|Nebraska|Nevada|New Hampshire|New Jersey|New Mexico|New York|North Carolina|North Dakota|Ohio|Oklahoma|Oregon|Pennsylvania|Rhode Island|South Carolina|South Dakota|Tennessee|Texas|Utah|Vermont|Virginia|Washington|West Virginia|Wisconsin|Wyoming|AL|AK|AZ|AR|CA|CO|CT|DE|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY)$/i.test(e)){if(t.state=e,r>0&&!t.city){let e=a[r-1].trim();e&&e.length>0&&!/^(select|Open|Get|Has not|Last verified)/i.test(e)&&(t.city=e)}break}}}}}return t}(e),...function(e){let t={},a=e.match(/([A-Z][A-Za-z\s&]+Insurance\s+Company(?:\s+of\s+[A-Za-z]+)?)/g);if(a&&a.length>0){let e=a[0].trim();e=e.replace(/^(View\s+Annuity\s+|COM\s+|click\s+button\s+to\s+verify|Get\s+County\s+|Has\s+not\s+been\s+verified)/gi,"").replace(/\s+/g," ").trim(),/^[A-Z]/.test(e)&&e.includes("Insurance Company")&&(t.insuranceCompany=e)}return t}(e),...function(e){let t;let a={},r=/(\d{1,2}\/\d{1,2}\/\d{4})\s+\$?[\d,]+\.?\d*\s+(LCP|GP|Guaranteed|COLA)\s+\$?([\d,]+\.?\d*)\s+\$?([\d,]+\.?\d*)\s+\$?([\d,]+\.?\d*)/g,n=[];for(;null!==(t=r.exec(e));){let e=t[1],a=t[2],r=parseFloat(t[3].replace(/,/g,"")),s=parseFloat(t[5].replace(/,/g,""));if("LCP"!==a||!(s>0))continue;let[l,o,d]=e.split("/").map(Number),i=new Date(d,l-1,o);n.push({date:i,dateStr:e,sold:r,lcp:s})}if(n.length>0){n.sort((e,t)=>e.date.getTime()-t.date.getTime());let e=new Date(new Date);e.setMonth(e.getMonth()+6);let t=n[0].date,r=t>e?t:e,s=r.getMonth()+1,l=r.getDate(),o=r.getFullYear();a.paymentStartDate="".concat(s,"/").concat(l,"/").concat(o),a.paymentEndDate=n[n.length-1].dateStr,a.typeOfPayment="LCP",a.paymentAmount=n[0].lcp.toFixed(2)}if(!a.paymentAmount){let t=e.match(/\d{1,2}\/\d{1,2}\/\d{4}\s+\$?[\d,]+\.?\d*\s+LCP\s+\$?[\d,]+\.?\d*\s+\$?[\d,]+\.?\d*\s+\$?([\d,]+\.?\d*)/);if(t){let e=t[1].replace(/,/g,"");parseFloat(e)>0&&(a.paymentAmount=e,a.typeOfPayment="LCP")}}if(/\d{1,2}\/\d{1,2}\/\d{4}\s+\$[\d,]+\.?\d*.*\n.*\d{1,2}\/\d{1,2}\/\d{4}\s+\$[\d,]+\.?\d*/.test(e)&&(a.paymentFrequency="Monthly"),n.length>=2){let e=n[0].lcp,t=e;for(let a=1;a<n.length;a++)if(Math.abs(n[a].lcp-e)>.01){t=n[a].lcp;break}if(t!==e&&e>0){let r=(t-e)/e*100;a.annualIncrease=r.toFixed(2)}}return a}(e)},a=l(t.dob||""),r=new Date,n=new Date(r.getFullYear()+Math.min(30,75-a),r.getMonth(),r.getDate());return(t.paymentEndDate="".concat(n.getMonth()+1,"/").concat(n.getDate(),"/").concat(n.getFullYear()),t.age=a.toString(),t.crmId||t.firstName||t.lastName)?t:null}let N={crmId:["crm","id","client id","customer id","crm id"],firstName:["first name","firstname","fname","given name","first"],lastName:["last name","lastname","lname","surname","family name","last"],ssn:["ssn","social security","social security number","ss#"],dob:["dob","date of birth","birth date","birthdate","birthday"],age:["age","current age","client age"],gender:["gender","sex","gen"],phone1:["phone 1","phone1","main phone","primary phone","phone"],phone2:["phone 2","phone2","secondary phone","alternate phone"],phone3:["phone 3","phone3","third phone"],email:["email","e-mail","email address"],insuranceCompany:["insurance","insurance company","insurer","carrier"],typeOfPayment:["payment type","type of payment","payment method","type"],paymentFrequency:["frequency","payment frequency","pay frequency"],paymentStartDate:["start date","begin date","effective date"],paymentEndDate:["end date","expiration date","maturity date"],paymentAmount:["amount","payment amount","payment","premium"],annualIncrease:["annual increase","yearly increase","increase"],fullAddress:["address","full address","complete address","home address"],streetAddress1:["street","street address","address line 1","street 1","street address 1"],streetAddress2:["street 2","address line 2","apt","suite","unit"],city:["city","town"],state:["state","province"],zipCode:["zip","zip code","postal code","postal","zipcode"]};class D{static parseRawData(e){if(!e.trim())return null;let t=b(e);return t?{headers:["Field","Value"],rows:t?[["CRM ID",t.crmId||""],["Name","".concat(t.firstName||""," ").concat(t.lastName||"")],["SSN",t.ssn||"Unknown"],["DOB",t.dob||"Unknown"],["Gender",t.gender||""],["Phone 1 (Main)",t.phone1||""],["Phone 2",t.phone2||""],["Phone 3",t.phone3||""],["Email",t.email||""],["Address",t.streetAddress1||""],["City",t.city||""],["State",t.state||""],["ZIP",t.zipCode||""],["Insurance",t.insuranceCompany||""],["Payment Type",t.typeOfPayment||""],["Payment Amount",t.paymentAmount||""],["Frequency",t.paymentFrequency||""],["Start Date",t.paymentStartDate||""],["End Date",t.paymentEndDate||""],["Annual Increase %",t.annualIncrease||"0"]]:[]}:this.parseDelimitedData(e)}static getStructuredData(e){return e.trim()?b(e):null}static parseDelimitedData(e){let t=e.trim().split("\n");if(0===t.length)return{headers:[],rows:[]};let a=t[0],r=a.split("	");1===r.length&&(r=a.split(","));let n=r.map(e=>e.trim()),s=[];for(let e=1;e<t.length;e++){let a=t[e],r=a.split("	");1!==r.length||a.includes("	")||(r=a.split(",")),r.length>0&&s.push(r.map(e=>e.trim()))}return{headers:n,rows:s}}static processData(e){return 0===e.rows.length?{}:"Field"===e.headers[0]&&"Value"===e.headers[1]?this.processAccessFormatData(e):this.processDelimitedFormatData(e)}static processAccessFormatData(e){let t={};return e.rows.forEach(e=>{let[a,r]=e,n=a.toLowerCase();n.includes("crm")?t.crmId=r:n.includes("ssn")?t.ssn=r:n.includes("dob")?t.dob=r:n.includes("age")?t.age=r:n.includes("gender")?t.gender=r:n.includes("phone 1")||n.includes("phone1")||"phone"===n&&!t.phone1?t.phone1=r:n.includes("phone 2")||n.includes("phone2")?t.phone2=r:n.includes("phone 3")||n.includes("phone3")?t.phone3=r:n.includes("email")?t.email=r:!n.includes("address")||n.includes("city")||n.includes("state")?n.includes("city")?t.city=r:n.includes("state")?t.state=r:n.includes("zip")?t.zipCode=r:n.includes("insurance")?t.insuranceCompany=r:n.includes("payment type")?t.typeOfPayment=r:n.includes("payment amount")||"amount"===n?t.paymentAmount=r:n.includes("frequency")?t.paymentFrequency=r:n.includes("annual increase")&&(t.annualIncrease=r):(t.streetAddress1=r,t.fullAddress=r)}),t}static processDelimitedFormatData(e){let t=e.rows[0],a={};return Object.keys(N).forEach(r=>{let n=N[r],s=e.headers.findIndex(e=>n.some(t=>e.toLowerCase().includes(t.toLowerCase())));-1!==s&&t[s]&&(a[r]=t[s].trim())}),a.age||(a.age="50"),a.ssn||(a.ssn="___-__-____"),a.dob||(a.dob=""),a}static validateProcessingResult(e){return!!(e.crmId||e.firstName||e.lastName)}}var w=a(7800);class v{static exportToExcel(e){if(0===e.length){alert("No records to export");return}try{let t=[["CRM ID","First Name","Last Name","SSN","DOB","Age","Gender","Phone 1","Phone 2","Phone 3","Email","Insurance Company","Payment Type","Payment Frequency","Start Date","End Date","Amount","Annual Increase","Full Address","Street Address 1","Street Address 2","City","State","ZIP Code"],...e.map(e=>[e.crmId||"",e.firstName||"",e.lastName||"",e.ssn||"",e.dob||"",e.age||"",e.gender||"",e.phone1||"",e.phone2||"",e.phone3||"",e.email||"",e.insuranceCompany||"",e.typeOfPayment||"",e.paymentFrequency||"",e.paymentStartDate||"",e.paymentEndDate||"",e.paymentAmount||"",e.annualIncrease||"0",e.fullAddress||"",e.streetAddress1||"",e.streetAddress2||"",e.city||"",e.state||"",e.zipCode||""])],a=w.P6.aoa_to_sheet(t),r=w.P6.book_new();w.P6.book_append_sheet(r,a,"Scrubbed Data"),w.NC(r,"scrubbed-data.xlsx")}catch(e){console.error("Export failed:",e),alert("Export failed. Please try again.")}}static getExportFileName(){let e=new Date().toISOString().slice(0,19).replace(/[:.]/g,"-");return"scrubbed-data-".concat(e,".xlsx")}static validateExportData(e){let t=[];return 0===e.length&&t.push("No records to export"),e.forEach((e,a)=>{e.crmId||e.firstName||e.lastName||t.push("Record ".concat(a+1,": Missing required client information"))}),{isValid:0===t.length,errors:t}}}function j(){let{state:e,actions:t}=function(){let[e,t]=(0,n.useState)({uploadedFile:null,rawData:"",parsedData:{headers:[],rows:[]},currentRecord:{},completedRecords:[],isDataLoaded:!1});return(0,n.useEffect)(()=>{let e=function(){try{let e=localStorage.getItem(y);if(!e)return null;let t=JSON.parse(e);if("1.0"!==t.version)return console.warn("⚠️ Storage version mismatch, clearing old data"),f(),null;return console.log("✅ Data loaded from localStorage:",new Date().toLocaleTimeString()),{uploadedFile:t.uploadedFile,rawData:t.rawData||"",parsedData:t.parsedData||{headers:[],rows:[]},currentRecord:t.currentRecord||{},completedRecords:t.completedRecords||[]}}catch(e){return console.error("❌ Failed to load from localStorage:",e),null}}();e?t(t=>({...t,uploadedFile:e.uploadedFile||null,rawData:e.rawData||"",parsedData:e.parsedData||{headers:[],rows:[]},currentRecord:e.currentRecord||{},completedRecords:e.completedRecords||[],isDataLoaded:!0})):t(e=>({...e,isDataLoaded:!0}))},[]),(0,n.useEffect)(()=>{if(e.isDataLoaded){let t=setTimeout(()=>{!function(e){try{let t={uploadedFile:e.uploadedFile||null,rawData:e.rawData||"",parsedData:e.parsedData||{headers:[],rows:[]},currentRecord:e.currentRecord||{},completedRecords:e.completedRecords||[],lastSaved:new Date().toISOString()},a={...t,uploadedFile:t.uploadedFile?{name:t.uploadedFile.name,size:t.uploadedFile.size,type:t.uploadedFile.type,lastModified:t.uploadedFile.lastModified}:null,version:"1.0"};localStorage.setItem(y,JSON.stringify(a)),console.log("✅ Data saved to localStorage:",new Date().toLocaleTimeString())}catch(e){console.error("❌ Failed to save to localStorage:",e)}}({uploadedFile:e.uploadedFile,rawData:e.rawData,parsedData:e.parsedData,currentRecord:e.currentRecord,completedRecords:e.completedRecords})},1e3);return()=>clearTimeout(t)}},[e.uploadedFile,e.rawData,e.parsedData,e.currentRecord,e.completedRecords,e.isDataLoaded]),{state:e,actions:{setUploadedFile:e=>{t(t=>({...t,uploadedFile:e}))},setRawData:e=>{t(t=>({...t,rawData:e}))},setParsedData:e=>{t(t=>({...t,parsedData:e}))},setCurrentRecord:e=>{t(t=>({...t,currentRecord:e}))},setCompletedRecords:e=>{t(t=>({...t,completedRecords:e}))},updateCurrentRecord:(e,a)=>{t(t=>({...t,currentRecord:{...t.currentRecord,[e]:a}}))},addCompletedRecord:e=>{t(t=>({...t,completedRecords:[...t.completedRecords,e]}))},clearCurrentRecord:()=>{t(e=>({...e,currentRecord:{},rawData:"",parsedData:{headers:[],rows:[]}}))},hardReset:()=>{window.confirm("Are you sure you want to reset all data? This cannot be undone.")&&(t({uploadedFile:null,rawData:"",parsedData:{headers:[],rows:[]},currentRecord:{},completedRecords:[],isDataLoaded:!0}),f(),alert("All data has been reset. Page will reload."),window.location.reload())}}}}();return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,r.jsx)(s,{uploadedFile:e.uploadedFile,completedRecords:e.completedRecords,onFileUpload:e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];r&&t.setUploadedFile(r)},onExport:()=>{v.exportToExcel(e.completedRecords)},onCompleteAndNext:()=>{t.addCompletedRecord(e.currentRecord),t.clearCurrentRecord()},hasCurrentRecord:Object.keys(e.currentRecord).length>0,onHardReset:t.hardReset,hasStoredData:function(){try{return null!==localStorage.getItem(y)}catch(e){return!1}}()}),(0,r.jsxs)("div",{className:"flex-1 p-4 flex flex-col",children:[(0,r.jsx)("div",{className:"flex-[2] mb-3",children:(0,r.jsx)(x,{currentRecord:e.currentRecord,onFieldChange:(e,a)=>{t.updateCurrentRecord(e,a)}})}),(0,r.jsx)("div",{className:"flex-[3]",children:(0,r.jsx)(g,{rawData:e.rawData,parsedData:e.parsedData,onRawDataChange:t.setRawData,onParseData:()=>{let a=D.parseRawData(e.rawData);a&&t.setParsedData(a)},onProcessData:()=>{let a=D.getStructuredData(e.rawData);if(a){let e={crmId:a.crmId||"",firstName:a.firstName||"",lastName:a.lastName||"",ssn:a.ssn&&"Unknown"!==a.ssn?a.ssn:"___-__-____",dob:a.dob&&"Unknown"!==a.dob?a.dob:"",age:a.age||"50",gender:a.gender||"",phone1:a.phone1||"",phone2:a.phone2||"",phone3:a.phone3||"",email:a.email||"",streetAddress1:a.streetAddress1||"",streetAddress2:a.streetAddress2||"",city:a.city||"",state:a.state||"",zipCode:a.zipCode||"",fullAddress:a.fullAddress||a.streetAddress1||"",insuranceCompany:a.insuranceCompany||"",typeOfPayment:a.typeOfPayment||"",paymentAmount:a.paymentAmount||"",paymentFrequency:a.paymentFrequency||"",annualIncrease:a.annualIncrease||"",paymentStartDate:a.paymentStartDate||"",paymentEndDate:a.paymentEndDate||""};(e.crmId||e.firstName||e.lastName)&&t.setCurrentRecord(e)}},onResetCurrentData:()=>{t.setRawData(""),t.setParsedData({headers:[],rows:[]})}})})]})]})}}},function(e){e.O(0,[425,971,23,744],function(){return e(e.s=4663)}),_N_E=e.O()}]);